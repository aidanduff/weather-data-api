{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Admin\\\\git\\\\weather-data-api-local\\\\weather-data-api\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Admin\\\\git\\\\weather-data-api-local\\\\weather-data-api\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\Admin\\\\git\\\\weather-data-api-local\\\\weather-data-api\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Admin\\\\git\\\\weather-data-api-local\\\\weather-data-api\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import WeatherDataService from\"../services/weatherDataService\";import Pagination from\"./pagination\";import WeatherDataTable from\"./weatherDataTable\";import ChartPanel from\"./chartPanel\";import Message from\"./message\";var WeatherData=/*#__PURE__*/function(_Component){_inherits(WeatherData,_Component);var _super=_createSuper(WeatherData);function WeatherData(props){var _this;_classCallCheck(this,WeatherData);_this=_super.call(this,props);_this.getPageData=function(){var firstYear=_this.state.weatherDataItems[0].year;var lastYear=_this.state.weatherDataItems[_this.state.weatherDataItems.length-1].year;var uniqueYears=lastYear-firstYear;var chunks=[];while(firstYear<=lastYear){chunks.push(_this.state.weatherDataItems.filter(function(wdi){return wdi.year===firstYear;}));firstYear++;}var currentChunk=chunks[_this.state.currentPage];if(!currentChunk)currentChunk=_this.state.weatherDataItems;return{uniqueYears:uniqueYears,currentChunk:currentChunk,chunks:chunks};};_this.handlePageChange=function(page){_this.setState({currentPage:page});};_this.state={weatherDataItems:[],currentChunk:[],chunks:[],currentPage:1,showMessage:false,uploadMessage:\"\"};return _this;}_createClass(WeatherData,[{key:\"componentWillMount\",value:function componentWillMount(){if(this.props.location.state===null||this.props.location.state===undefined)return;this.setState({showMessage:this.props.location.state.showMessage,uploadMessage:this.props.location.state.message});this.props.history.replace({pathname:\"/home\",state:{showMessage:false}});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;WeatherDataService.retrieveAllData().then(function(response){_this2.setState({weatherDataItems:response.data});});}},{key:\"render\",value:function render(props){var _this$state=this.state,currentPage=_this$state.currentPage,showMessage=_this$state.showMessage,uploadMessage=_this$state.uploadMessage;if(this.state.weatherDataItems.length===0)return null;var _this$getPageData=this.getPageData(),uniqueYears=_this$getPageData.uniqueYears,currentChunk=_this$getPageData.currentChunk,chunks=_this$getPageData.chunks;return/*#__PURE__*/React.createElement(\"div\",{className:\"contentContainer\"},showMessage&&/*#__PURE__*/React.createElement(Message,{messageClass:\"alert alert-success\",duration:3000,message:uploadMessage}),/*#__PURE__*/React.createElement(\"div\",{className:\"row justify-content-center m-2\"},/*#__PURE__*/React.createElement(\"h1\",null,\"Weather Station: \",this.state.weatherDataItems[0].stationLocation)),/*#__PURE__*/React.createElement(\"div\",{className:\"row\"},/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(WeatherDataTable,{weatherDataItems:currentChunk}),/*#__PURE__*/React.createElement(Pagination,{weatherDataItemsCount:this.state.weatherDataItems.length,currentPage:currentPage,pageSize:currentChunk.length,onPageChange:this.handlePageChange,pagesCount:uniqueYears})),/*#__PURE__*/React.createElement(\"div\",{className:\"col\"},/*#__PURE__*/React.createElement(ChartPanel,{weatherDataItems:currentChunk}))));}}]);return WeatherData;}(Component);export default WeatherData;","map":{"version":3,"sources":["C:/Users/Admin/git/weather-data-api-local/weather-data-api/frontend/src/components/weatherData.jsx"],"names":["React","Component","WeatherDataService","Pagination","WeatherDataTable","ChartPanel","Message","WeatherData","props","getPageData","firstYear","state","weatherDataItems","year","lastYear","length","uniqueYears","chunks","push","filter","wdi","currentChunk","currentPage","handlePageChange","page","setState","showMessage","uploadMessage","location","undefined","message","history","replace","pathname","retrieveAllData","then","response","data","stationLocation"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport WeatherDataService from \"../services/weatherDataService\";\r\nimport Pagination from \"./pagination\";\r\nimport WeatherDataTable from \"./weatherDataTable\";\r\nimport ChartPanel from \"./chartPanel\";\r\nimport Message from \"./message\";\r\n\r\nclass WeatherData extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      weatherDataItems: [],\r\n      currentChunk: [],\r\n      chunks: [],\r\n      currentPage: 1,\r\n      showMessage: false,\r\n      uploadMessage: \"\",\r\n    };\r\n  }\r\n\r\n  componentWillMount() {\r\n    if (\r\n      this.props.location.state === null ||\r\n      this.props.location.state === undefined\r\n    )\r\n      return;\r\n    this.setState({\r\n      showMessage: this.props.location.state.showMessage,\r\n      uploadMessage: this.props.location.state.message,\r\n    });\r\n\r\n    this.props.history.replace({\r\n      pathname: \"/home\",\r\n      state: { showMessage: false },\r\n    });\r\n  }\r\n\r\n  componentDidMount() {\r\n    WeatherDataService.retrieveAllData().then((response) => {\r\n      this.setState({\r\n        weatherDataItems: response.data,\r\n      });\r\n    });\r\n  }\r\n\r\n  getPageData = () => {\r\n    let firstYear = this.state.weatherDataItems[0].year;\r\n    const lastYear = this.state.weatherDataItems[\r\n      this.state.weatherDataItems.length - 1\r\n    ].year;\r\n    const uniqueYears = lastYear - firstYear;\r\n\r\n    let chunks = [];\r\n    while (firstYear <= lastYear) {\r\n      chunks.push(\r\n        this.state.weatherDataItems.filter((wdi) => wdi.year === firstYear)\r\n      );\r\n      firstYear++;\r\n    }\r\n    let currentChunk = chunks[this.state.currentPage];\r\n\r\n    if (!currentChunk) currentChunk = this.state.weatherDataItems;\r\n\r\n    return { uniqueYears, currentChunk, chunks };\r\n  };\r\n\r\n  handlePageChange = (page) => {\r\n    this.setState({ currentPage: page });\r\n  };\r\n\r\n  render(props) {\r\n    const { currentPage, showMessage, uploadMessage } = this.state;\r\n\r\n    if (this.state.weatherDataItems.length === 0) return null;\r\n\r\n    const { uniqueYears, currentChunk, chunks } = this.getPageData();\r\n\r\n    return (\r\n      <div className=\"contentContainer\">\r\n        {showMessage && (\r\n          <Message\r\n            messageClass={\"alert alert-success\"}\r\n            duration={3000}\r\n            message={uploadMessage}\r\n          />\r\n        )}\r\n        <div className=\"row justify-content-center m-2\">\r\n          <h1>\r\n            Weather Station: {this.state.weatherDataItems[0].stationLocation}\r\n          </h1>\r\n        </div>\r\n        <div className=\"row\">\r\n          <div className=\"col\">\r\n            <WeatherDataTable weatherDataItems={currentChunk} />\r\n            <Pagination\r\n              weatherDataItemsCount={this.state.weatherDataItems.length}\r\n              currentPage={currentPage}\r\n              pageSize={currentChunk.length}\r\n              onPageChange={this.handlePageChange}\r\n              pagesCount={uniqueYears}\r\n            />\r\n          </div>\r\n          <div className=\"col\">\r\n            <ChartPanel weatherDataItems={currentChunk} />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default WeatherData;\r\n"]},"metadata":{},"sourceType":"module"}
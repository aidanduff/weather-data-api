{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Admin\\\\git\\\\weather-data-api-local\\\\weather-data-api\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Admin\\\\git\\\\weather-data-api-local\\\\weather-data-api\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\Admin\\\\git\\\\weather-data-api-local\\\\weather-data-api\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Admin\\\\git\\\\weather-data-api-local\\\\weather-data-api\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Message from\"./message\";import weatherDataService from\"../services/weatherDataService\";var FileUpload=/*#__PURE__*/function(_Component){_inherits(FileUpload,_Component);var _super=_createSuper(FileUpload);function FileUpload(){var _this;_classCallCheck(this,FileUpload);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={file:null,buttonStatus:false,showMessage:false,filePresent:false,errorMessage:\"\"};_this.onFormSubmit=function(e){e.preventDefault();// Stop form submit\nif(_this.state.file!=null){weatherDataService.addRecord(_this.state.file).then(function(response){_this.props.history.push({pathname:\"/home\",state:{showMessage:true,message:response.data.message}});});}};_this.getButtonStatus=function(){return _this.state.buttonStatus?\"btn btn-primary btn-block mt-4\":\"btn btn-primary btn-block mt-4 disabled\";};_this.onChange=function(e){var str=e.target.files[0].name;if(str.endsWith(\".csv\")){_this.setState({file:e.target.files[0],buttonStatus:true});}else{_this.setState({showMessage:true,errorMessage:\"File must be in .csv format!\"},function(){return setTimeout(function(){_this.setState({showMessage:false});},3000);});}};return _this;}_createClass(FileUpload,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;weatherDataService.retrieveAllData().then(function(response){_this2.setState({filePresent:response.status===200});});}},{key:\"render\",value:function render(){var _this$state=this.state,showMessage=_this$state.showMessage,errorMessage=_this$state.errorMessage,filePresent=_this$state.filePresent;return/*#__PURE__*/React.createElement(\"div\",{className:\"contentContainer\"},showMessage&&/*#__PURE__*/React.createElement(Message,{showMessage:showMessage,messageClass:\"alert alert-danger\",duration:3000,message:errorMessage}),!filePresent?/*#__PURE__*/React.createElement(\"form\",{onSubmit:this.onFormSubmit},/*#__PURE__*/React.createElement(\"h1\",{className:\"mt-2\"},\"File Upload\"),/*#__PURE__*/React.createElement(\"div\",{className:\"custom-file mt-4\"},/*#__PURE__*/React.createElement(\"div\",{className:\"input-group\"},/*#__PURE__*/React.createElement(\"input\",{type:\"file\",accept:\"text/csv, .csv\",className:\"custom-file-input\",id:\"customFile\",onChange:this.onChange}),/*#__PURE__*/React.createElement(\"label\",{className:\"custom-file-label\",htmlFor:\"customFile\"},this.state.file===null?\"Choose File\":this.state.file.name)),/*#__PURE__*/React.createElement(\"button\",{className:this.getButtonStatus(),type:\"submit\"},\"Upload\"))):/*#__PURE__*/React.createElement(\"h3\",{className:\"mt-2\"},\"A dataset is already present in the system. You must delete this before uploading another. This is to ensure that data is presented in a way that makes sense. To delete the existing record set, go to the settings tab and click the Delete button.\"));}}]);return FileUpload;}(Component);export default FileUpload;","map":{"version":3,"sources":["C:/Users/Admin/git/weather-data-api-local/weather-data-api/frontend/src/components/fileUpload.jsx"],"names":["React","Component","Message","weatherDataService","FileUpload","state","file","buttonStatus","showMessage","filePresent","errorMessage","onFormSubmit","e","preventDefault","addRecord","then","response","props","history","push","pathname","message","data","getButtonStatus","onChange","str","target","files","name","endsWith","setState","setTimeout","retrieveAllData","status"],"mappings":"owBAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,MAAOC,CAAAA,OAAP,KAAoB,WAApB,CACA,MAAOC,CAAAA,kBAAP,KAA+B,gCAA/B,C,GAEMC,CAAAA,U,2UACJC,K,CAAQ,CACNC,IAAI,CAAE,IADA,CAENC,YAAY,CAAE,KAFR,CAGNC,WAAW,CAAE,KAHP,CAINC,WAAW,CAAE,KAJP,CAKNC,YAAY,CAAE,EALR,C,OAQRC,Y,CAAe,SAACC,CAAD,CAAO,CACpBA,CAAC,CAACC,cAAF,GAAoB;AACpB,GAAI,MAAKR,KAAL,CAAWC,IAAX,EAAmB,IAAvB,CAA6B,CAC3BH,kBAAkB,CAACW,SAAnB,CAA6B,MAAKT,KAAL,CAAWC,IAAxC,EAA8CS,IAA9C,CAAmD,SAACC,QAAD,CAAc,CAC/D,MAAKC,KAAL,CAAWC,OAAX,CAAmBC,IAAnB,CAAwB,CACtBC,QAAQ,CAAE,OADY,CAEtBf,KAAK,CAAE,CACLG,WAAW,CAAE,IADR,CAELa,OAAO,CAAEL,QAAQ,CAACM,IAAT,CAAcD,OAFlB,CAFe,CAAxB,EAOD,CARD,EASD,CACF,C,OAQDE,e,CAAkB,UAAM,CACtB,MAAO,OAAKlB,KAAL,CAAWE,YAAX,CACH,gCADG,CAEH,yCAFJ,CAGD,C,OAEDiB,Q,CAAW,SAACZ,CAAD,CAAO,CAChB,GAAMa,CAAAA,GAAG,CAAGb,CAAC,CAACc,MAAF,CAASC,KAAT,CAAe,CAAf,EAAkBC,IAA9B,CACA,GAAIH,GAAG,CAACI,QAAJ,CAAa,MAAb,CAAJ,CAA0B,CACxB,MAAKC,QAAL,CAAc,CACZxB,IAAI,CAAEM,CAAC,CAACc,MAAF,CAASC,KAAT,CAAe,CAAf,CADM,CAEZpB,YAAY,CAAE,IAFF,CAAd,EAID,CALD,IAKO,CACL,MAAKuB,QAAL,CACE,CACEtB,WAAW,CAAE,IADf,CAEEE,YAAY,CAAE,8BAFhB,CADF,CAKE,iBACEqB,CAAAA,UAAU,CAAC,UAAM,CACf,MAAKD,QAAL,CAAc,CAAEtB,WAAW,CAAE,KAAf,CAAd,EACD,CAFS,CAEP,IAFO,CADZ,EALF,EAUD,CACF,C,mGA/BmB,iBAClBL,kBAAkB,CAAC6B,eAAnB,GAAqCjB,IAArC,CAA0C,SAACC,QAAD,CAAc,CACtD,MAAI,CAACc,QAAL,CAAc,CAAErB,WAAW,CAAEO,QAAQ,CAACiB,MAAT,GAAoB,GAAnC,CAAd,EACD,CAFD,EAGD,C,uCA6BQ,iBAC4C,KAAK5B,KADjD,CACCG,WADD,aACCA,WADD,CACcE,YADd,aACcA,YADd,CAC4BD,WAD5B,aAC4BA,WAD5B,CAEP,mBACE,2BAAK,SAAS,CAAC,kBAAf,EACGD,WAAW,eACV,oBAAC,OAAD,EACE,WAAW,CAAEA,WADf,CAEE,YAAY,CAAE,oBAFhB,CAGE,QAAQ,CAAE,IAHZ,CAIE,OAAO,CAAEE,YAJX,EAFJ,CASG,CAACD,WAAD,cACC,4BAAM,QAAQ,CAAE,KAAKE,YAArB,eACE,0BAAI,SAAS,CAAC,MAAd,gBADF,cAEE,2BAAK,SAAS,CAAC,kBAAf,eACE,2BAAK,SAAS,CAAC,aAAf,eACE,6BACE,IAAI,CAAC,MADP,CAEE,MAAM,CAAC,gBAFT,CAGE,SAAS,CAAC,mBAHZ,CAIE,EAAE,CAAC,YAJL,CAKE,QAAQ,CAAE,KAAKa,QALjB,EADF,cAQE,6BAAO,SAAS,CAAC,mBAAjB,CAAqC,OAAO,CAAC,YAA7C,EACG,KAAKnB,KAAL,CAAWC,IAAX,GAAoB,IAApB,CACG,aADH,CAEG,KAAKD,KAAL,CAAWC,IAAX,CAAgBsB,IAHtB,CARF,CADF,cAeE,8BAAQ,SAAS,CAAE,KAAKL,eAAL,EAAnB,CAA2C,IAAI,CAAC,QAAhD,WAfF,CAFF,CADD,cAwBC,0BAAI,SAAS,CAAC,MAAd,0PAjCJ,CADF,CA2CD,C,wBAtGsBtB,S,EAyGzB,cAAeG,CAAAA,UAAf","sourcesContent":["import React, { Component } from \"react\";\r\nimport Message from \"./message\";\r\nimport weatherDataService from \"../services/weatherDataService\";\r\n\r\nclass FileUpload extends Component {\r\n  state = {\r\n    file: null,\r\n    buttonStatus: false,\r\n    showMessage: false,\r\n    filePresent: false,\r\n    errorMessage: \"\",\r\n  };\r\n\r\n  onFormSubmit = (e) => {\r\n    e.preventDefault(); // Stop form submit\r\n    if (this.state.file != null) {\r\n      weatherDataService.addRecord(this.state.file).then((response) => {\r\n        this.props.history.push({\r\n          pathname: \"/home\",\r\n          state: {\r\n            showMessage: true,\r\n            message: response.data.message,\r\n          },\r\n        });\r\n      });\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    weatherDataService.retrieveAllData().then((response) => {\r\n      this.setState({ filePresent: response.status === 200 });\r\n    });\r\n  }\r\n\r\n  getButtonStatus = () => {\r\n    return this.state.buttonStatus\r\n      ? \"btn btn-primary btn-block mt-4\"\r\n      : \"btn btn-primary btn-block mt-4 disabled\";\r\n  };\r\n\r\n  onChange = (e) => {\r\n    const str = e.target.files[0].name;\r\n    if (str.endsWith(\".csv\")) {\r\n      this.setState({\r\n        file: e.target.files[0],\r\n        buttonStatus: true,\r\n      });\r\n    } else {\r\n      this.setState(\r\n        {\r\n          showMessage: true,\r\n          errorMessage: \"File must be in .csv format!\",\r\n        },\r\n        () =>\r\n          setTimeout(() => {\r\n            this.setState({ showMessage: false });\r\n          }, 3000)\r\n      );\r\n    }\r\n  };\r\n\r\n  render() {\r\n    const { showMessage, errorMessage, filePresent } = this.state;\r\n    return (\r\n      <div className=\"contentContainer\">\r\n        {showMessage && (\r\n          <Message\r\n            showMessage={showMessage}\r\n            messageClass={\"alert alert-danger\"}\r\n            duration={3000}\r\n            message={errorMessage}\r\n          />\r\n        )}\r\n        {!filePresent ? (\r\n          <form onSubmit={this.onFormSubmit}>\r\n            <h1 className=\"mt-2\">File Upload</h1>\r\n            <div className=\"custom-file mt-4\">\r\n              <div className=\"input-group\">\r\n                <input\r\n                  type=\"file\"\r\n                  accept=\"text/csv, .csv\"\r\n                  className=\"custom-file-input\"\r\n                  id=\"customFile\"\r\n                  onChange={this.onChange}\r\n                />\r\n                <label className=\"custom-file-label\" htmlFor=\"customFile\">\r\n                  {this.state.file === null\r\n                    ? \"Choose File\"\r\n                    : this.state.file.name}\r\n                </label>\r\n              </div>\r\n              <button className={this.getButtonStatus()} type=\"submit\">\r\n                Upload\r\n              </button>\r\n            </div>\r\n          </form>\r\n        ) : (\r\n          <h3 className=\"mt-2\">\r\n            A dataset is already present in the system. You must delete this\r\n            before uploading another. This is to ensure that data is presented\r\n            in a way that makes sense. To delete the existing record set, go to\r\n            the settings tab and click the Delete button.\r\n          </h3>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default FileUpload;\r\n"]},"metadata":{},"sourceType":"module"}